<mxfile host="65bd71144e">
    <diagram name="Complete System Architecture" id="system-arch">
        <mxGraphModel dx="1153" dy="662" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="client-layer" value="Client Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="50" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="editagent" value="EditAgent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="100" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="apply-tool" value="Apply Tool&#xa;(json_editor_apply)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="350" y="420" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="mcp-client" value="MCP Client" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="280" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="services-layer" value="Core Services Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="530" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="custom-client" value="Custom Client" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="460" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="json-processor" value="JSON Processor&#xa;(json2map, map2json)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="80" y="580" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="protocol-layer" value="MCP Protocol Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="200" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="llm-interface" value="LLM Service&#xa;Interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="250" y="580" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="mcp-server" value="MCP Server&#xa;(Tool Registry &amp; Router)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="300" y="250" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="session-manager" value="Session Manager&#xa;(Redis Integration)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="420" y="580" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="tool-layer" value="Tool Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="370" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="config-manager" value="Configuration&#xa;Manager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="590" y="580" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="preview-tool" value="Preview Tool&#xa;(json_editor_preview)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="150" y="420" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="prompt-manager" value="Prompt Manager&#xa;(Template System)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="760" y="580" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="guardrails" value="Guardrails &amp;&#xa;Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="930" y="580" width="140" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="adapter-layer" value="LLM Adapter Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="690" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="gemini-adapter" value="Gemini Adapter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="150" y="740" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="openai-adapter" value="OpenAI Adapter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="300" y="740" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="custom-adapter" value="Custom LLM&#xa;Adapter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="450" y="740" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="external-layer" value="External Services &amp; Storage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="600" y="690" width="500" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="redis" value="Redis&#xa;(Session Storage)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="630" y="740" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="gemini-api" value="Google Gemini&#xa;API" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="750" y="740" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="openai-api" value="OpenAI&#xa;API" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="880" y="740" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="custom-llm" value="Custom LLM&#xa;Endpoints" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="1010" y="740" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="conn1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="editagent" target="mcp-server" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="400" y="150"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mcp-client" target="mcp-server" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="custom-client" target="mcp-server" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mcp-server" target="preview-tool" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="mcp-server" target="apply-tool" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="json-processor" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="400" y="350" as="sourcePoint"/>
                        <mxPoint x="680" y="400" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="400" y="350"/>
                            <mxPoint x="680" y="350"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="preview-tool" target="llm-interface" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="680" y="330" as="sourcePoint"/>
                        <mxPoint x="280" y="400" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="280" y="330"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="preview-tool" target="session-manager" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="apply-tool" target="json-processor" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="apply-tool" target="session-manager" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="llm-interface" target="config-manager" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="llm-interface" target="prompt-manager" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="710" y="490"/>
                            <mxPoint x="710" y="490"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="preview-tool" target="guardrails" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="llm-interface" target="gemini-adapter" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="llm-interface" target="openai-adapter" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="llm-interface" target="custom-adapter">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="session-manager" target="redis">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="gemini-adapter" target="gemini-api">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="openai-adapter" target="openai-api">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="custom-adapter" target="custom-llm">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="data-flow-label" value="Data Flow Direction" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="50" y="10" width="150" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="request-arrow" value="Request Flow" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;strokeColor=#0066cc;strokeWidth=3;" edge="1" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="220" y="20" as="sourcePoint"/>
                        <mxPoint x="280" y="20" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="response-arrow" value="Response Flow" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;strokeColor=#cc6600;strokeWidth=3;" edge="1" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="380" y="20" as="sourcePoint"/>
                        <mxPoint x="320" y="20" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram name="Data Flow Architecture" id="data-flow-arch">
        <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <!-- Input Stage -->
                <mxCell id="input-stage" value="Input Stage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="50" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="json-input" value="JSON Document" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="100" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="instruction-input" value="Natural Language&#xa;Instruction" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="280" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <!-- Processing Stage -->
                <mxCell id="processing-stage" value="Processing Stage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="200" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="validation" value="Input Validation&#xa;&amp; Guardrails" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="100" y="250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="json-parse" value="JSON Parser&#xa;(json2map)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="280" y="250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="map-format" value="Map Format&#xa;[{id, path, value}]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="460" y="250" width="140" height="60" as="geometry"/>
                </mxCell>
                <!-- Analysis Stage -->
                <mxCell id="analysis-stage" value="Analysis Stage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="350" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="prompt-build" value="Prompt Building&#xa;&amp; Templating" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="100" y="400" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="llm-analysis" value="LLM Analysis&#xa;&amp; Processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="280" y="400" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="change-extraction" value="Change Extraction&#xa;&amp; Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="460" y="400" width="120" height="60" as="geometry"/>
                </mxCell>
                <!-- Session Stage -->
                <mxCell id="session-stage" value="Session Management Stage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="500" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="session-create" value="Session Creation&#xa;&amp; Storage" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="100" y="550" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="redis-store" value="Redis Storage&#xa;(Session Data)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
                    <mxGeometry x="280" y="540" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="preview-response" value="Preview Response&#xa;Generation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="420" y="550" width="120" height="60" as="geometry"/>
                </mxCell>
                <!-- Apply Stage -->
                <mxCell id="apply-stage" value="Apply Stage" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=14;" vertex="1" parent="1">
                    <mxGeometry x="50" y="650" width="1050" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="session-retrieve" value="Session Retrieval&#xa;&amp; Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="100" y="700" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="change-apply" value="Change Application&#xa;(map2json)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="280" y="700" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="final-output" value="Modified JSON&#xa;Document" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="460" y="700" width="120" height="60" as="geometry"/>
                </mxCell>
                <!-- Flow Arrows -->
                <mxCell id="flow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="json-input" target="validation">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="instruction-input" target="validation">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="validation" target="json-parse">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="json-parse" target="map-format">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="map-format" target="prompt-build">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="prompt-build" target="llm-analysis">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="llm-analysis" target="change-extraction">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="change-extraction" target="session-create">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="session-create" target="redis-store">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0066cc;" edge="1" parent="1" source="session-create" target="preview-response">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#cc6600;" edge="1" parent="1" source="redis-store" target="session-retrieve">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#cc6600;" edge="1" parent="1" source="session-retrieve" target="change-apply">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="flow13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#cc6600;" edge="1" parent="1" source="change-apply" target="final-output">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <!-- Phase Labels -->
                <mxCell id="preview-phase" value="PREVIEW PHASE" style="text;html=1;strokeColor=none;fillColor=#cce5ff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontStyle=1;fontSize=16;" vertex="1" parent="1">
                    <mxGeometry x="650" y="350" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="apply-phase" value="APPLY PHASE" style="text;html=1;strokeColor=none;fillColor=#ffcccc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontStyle=1;fontSize=16;" vertex="1" parent="1">
                    <mxGeometry x="650" y="700" width="150" height="40" as="geometry"/>
                </mxCell>
                <!-- Legend -->
                <mxCell id="legend" value="Legend" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="850" y="100" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend-preview" value="Preview Flow" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;strokeColor=#0066cc;strokeWidth=3;" edge="1" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="870" y="140" as="sourcePoint"/>
                        <mxPoint x="920" y="140" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="legend-apply" value="Apply Flow" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;strokeColor=#cc6600;strokeWidth=3;" edge="1" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="870" y="160" as="sourcePoint"/>
                        <mxPoint x="920" y="160" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>